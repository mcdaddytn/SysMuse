# Neumi Atom Playlist Management System

A simple, CSV-based playlist management system for the Neumi Atom 4K Lite media player.

## Overview

This system allows you to:
- Automatically scan video directories and catalog all files
- Manage playlists using a simple CSV spreadsheet
- Generate M3U playlist files that work with Neumi Atom
- Easily add new content and regenerate playlists
- Filter out Mac system files and hidden files

## Features

- âœ… Supports MP4, MKV, AVI, MOV, M4V, TS, VOB, M2TS formats
- âœ… CSV-based playlist management (edit in Excel or any text editor)
- âœ… Ordinal-based playlist ordering (1, 2, 3...)
- âœ… Multiple playlists from the same library
- âœ… Filters out Mac system files (._*) and hidden files
- âœ… Easy to update when adding new videos
- âœ… Works on Windows, Mac, and Linux

## Requirements

- Python 3.6 or higher
- SD card or USB drive with video files organized in folders

## Quick Start

### Windows

1. **Scan your videos:**
   ```cmd
   double-click: scan_videos.bat
   ```
   - Enter your SD card drive letter (e.g., E)
   - Script will scan and create `video_library.csv`

2. **Edit the CSV:**
   - Open `video_library.csv` in Excel or Notepad
   - For each playlist column, enter numbers (1, 2, 3...) for playback order
   - Leave blank to exclude a video from that playlist

3. **Generate playlists:**
   ```cmd
   double-click: generate_playlists.bat
   ```
   - Script creates M3U files in `Playlists` folder
   - Optionally copies to SD card

### Mac/Linux

1. **Make scripts executable (first time only):**
   ```bash
   chmod +x scan_videos.sh generate_playlists.sh
   ```

2. **Scan your videos:**
   ```bash
   ./scan_videos.sh
   ```
   - Enter path to SD card (e.g., /Volumes/SDCARD)
   - Script will scan and create `video_library.csv`

3. **Edit the CSV:**
   - Open `video_library.csv` in Excel, Numbers, or a text editor
   - Enter numbers in playlist columns (1, 2, 3...)
   - Save and close

4. **Generate playlists:**
   ```bash
   ./generate_playlists.sh
   ```
   - Script creates M3U files in `Playlists` folder
   - Optionally copies to SD card

## Directory Structure

### On Your SD Card (Example)

```
E:\ (or /Volumes/SDCARD)
â”œâ”€â”€ Movies/
â”‚   â”œâ”€â”€ Casablanca (1942).mp4
â”‚   â”œâ”€â”€ The Searchers (1956).mkv
â”‚   â””â”€â”€ High Noon (1952).mp4
â”œâ”€â”€ ClassicMovies/
â”‚   â”œâ”€â”€ Citizen Kane (1941).mp4
â”‚   â””â”€â”€ Gone With The Wind (1939).mkv
â”œâ”€â”€ Documentaries/
â”‚   â””â”€â”€ Planet Earth S01E01.mp4
â”œâ”€â”€ Series/
â”‚   â””â”€â”€ Breaking Bad/
â”‚       â”œâ”€â”€ S01E01.mp4
â”‚       â””â”€â”€ S01E02.mp4
â”œâ”€â”€ MusicVideo/
â”‚   â””â”€â”€ [your music videos]
â””â”€â”€ Playlists/          â† Created by script
    â”œâ”€â”€ Playlist1.m3u
    â”œâ”€â”€ Playlist2.m3u
    â”œâ”€â”€ Playlist3.m3u
    â”œâ”€â”€ Documentaries.m3u
    â”œâ”€â”€ Series1.m3u
    â””â”€â”€ Series2.m3u
```

### Working Directory (On Your Computer)

```
neumi_playlist_system/
â”œâ”€â”€ scan_videos.py          # Python script - Step 1
â”œâ”€â”€ scan_videos.bat          # Windows wrapper
â”œâ”€â”€ scan_videos.sh           # Mac/Linux wrapper
â”œâ”€â”€ generate_playlists.py    # Python script - Step 2
â”œâ”€â”€ generate_playlists.bat   # Windows wrapper
â”œâ”€â”€ generate_playlists.sh    # Mac/Linux wrapper
â”œâ”€â”€ video_library.csv        # Generated by step 1, edit this!
â”œâ”€â”€ Playlists/               # Generated by step 2
â”‚   â””â”€â”€ *.m3u files
â””â”€â”€ README.md                # This file
```

## CSV File Format

### Example CSV Structure

```csv
filename,file_type,category,relative_path,Playlist1,Playlist2,Playlist3,Documentaries
Casablanca (1942).mp4,mp4,Movies,Movies/Casablanca (1942).mp4,1,1,,
The Searchers (1956).mkv,mkv,Movies,Movies/The Searchers (1956).mkv,2,2,1,
High Noon (1952).mp4,mp4,Movies,Movies/High Noon (1952).mp4,3,,2,
Citizen Kane (1941).mp4,mp4,ClassicMovies,ClassicMovies/Citizen Kane (1941).mp4,4,3,,
Planet Earth S01E01.mp4,mp4,Documentaries,Documentaries/Planet Earth S01E01.mp4,,,,1
```

### Understanding the Columns

- **filename**: Name of the video file
- **file_type**: Extension (mp4, mkv, etc.)
- **category**: Source folder (Movies, ClassicMovies, etc.)
- **relative_path**: Path relative to SD card root
- **Playlist columns** (Playlist1, Playlist2, etc.): Order in that playlist
  - Enter a number to include the video (1=first, 2=second, etc.)
  - Leave blank to exclude from that playlist

### Default Playlists

The system creates these playlist columns by default:
- **Playlist1**: General purpose playlist #1
- **Playlist2**: General purpose playlist #2
- **Playlist3**: General purpose playlist #3
- **Documentaries**: For documentary content
- **Series1**: For TV series/episodes
- **Series2**: Alternative series playlist

You can customize these by editing the batch/shell scripts.

## Mac System Files Filtering

The scanner **automatically filters out**:
- Mac resource fork files starting with `._`
- Hidden files starting with `.`
- Windows thumbnail cache (`Thumbs.db`)

This means you'll only see actual video files in your CSV, not system files.

## Customizing Categories and Playlists

### Changing Scanned Categories

**Windows** - Edit `scan_videos.bat`:
```batch
REM Change this line:
set CATEGORIES=Movies ClassicMovies Documentaries Series MusicVideo

REM To match your folders:
set CATEGORIES=Movies TVShows Westerns Comedy Action
```

**Mac/Linux** - Edit `scan_videos.sh`:
```bash
# Change this line:
CATEGORIES="Movies ClassicMovies Documentaries Series MusicVideo"

# To match your folders:
CATEGORIES="Movies TVShows Westerns Comedy Action"
```

### Changing Playlist Names

**Windows** - Edit `scan_videos.bat`:
```batch
REM Change this line:
set PLAYLISTS=Playlist1 Playlist2 Playlist3 Documentaries Series1 Series2

REM To your desired playlists:
set PLAYLISTS=DadsFavorites KidsMovies ActionMovies ShortFilms
```

**Mac/Linux** - Edit `scan_videos.sh`:
```bash
# Change this line:
PLAYLISTS="Playlist1 Playlist2 Playlist3 Documentaries Series1 Series2"

# To your desired playlists:
PLAYLISTS="DadsFavorites KidsMovies ActionMovies ShortFilms"
```

## Workflow for Adding New Content

### Complete Workflow

1. **Add new video files** to your SD card folders (Movies, ClassicMovies, etc.)

2. **Re-scan the SD card:**
   - Windows: Run `scan_videos.bat`
   - Mac/Linux: Run `./scan_videos.sh`
   - This creates a NEW `video_library.csv`

3. **Important: Preserve your existing playlist assignments!**
   - The new CSV will have empty playlist columns
   - Open your OLD `video_library.csv` (save as `video_library_backup.csv` first)
   - Copy playlist column values to the new CSV
   - OR manually add order numbers for new videos

4. **Edit playlist assignments** for new videos:
   - Open `video_library.csv`
   - Find new videos (they'll have empty playlist columns)
   - Add order numbers where you want them

5. **Regenerate playlists:**
   - Windows: Run `generate_playlists.bat`
   - Mac/Linux: Run `./generate_playlists.sh`

6. **Copy Playlists folder to SD card**

### Preserving Existing Playlists When Adding Content

**Option 1: Manual merge**
1. Keep backup of old CSV: `video_library_old.csv`
2. Run scan to create new CSV
3. Open both in Excel
4. Copy playlist columns from old to new for existing files
5. Add order numbers for new files

**Option 2: Edit CSV directly**
1. Keep existing `video_library.csv`
2. Add new video files to SD card
3. Manually add new rows to CSV with correct paths
4. Assign playlist order numbers
5. Regenerate playlists

## Advanced Usage

### Running Python Scripts Directly

**Scan videos:**
```bash
python scan_videos.py E:\ -c Movies TVShows -p All Favorites
```

**Generate playlists:**
```bash
python generate_playlists.py video_library.csv E:\ --summary
```

### Command-Line Options

**scan_videos.py:**
```
python scan_videos.py <base_path> [options]

Arguments:
  base_path              Path to SD card (required)

Options:
  -c, --categories      Category folders to scan
  -p, --playlists       Playlist names to create columns for
  -o, --output          Output CSV filename (default: video_library.csv)

Example:
  python scan_videos.py E:\ -c Movies TVShows Docs -p All Favorites Kids
```

**generate_playlists.py:**
```
python generate_playlists.py <csv_file> <base_path> [options]

Arguments:
  csv_file              CSV file to read (required)
  base_path             Path to SD card (required)

Options:
  -o, --output-dir      Output directory for playlists (default: Playlists)
  --no-clean            Don't delete existing playlists first
  --summary             Generate summary report

Example:
  python generate_playlists.py video_library.csv E:\ --summary
```

## Using Playlists on Neumi Atom

### Setup

1. **Copy Playlists folder** to root of SD card
2. **Insert SD card** into Neumi Atom
3. **Power on** device

### Playing Playlists

1. **Navigate** using remote:
   - Video â†’ Browse â†’ Playlists folder

2. **Select** a playlist file:
   - Playlist1.m3u
   - Documentaries.m3u
   - etc.

3. **Press Play** - Videos play in order automatically

### Tips for Neumi Atom

- **Auto-play**: In Neumi settings, enable auto-play and resume
- **Playlist loop**: Enable loop to restart playlist when finished
- **Remote shortcuts**: Program remote for quick playlist access
- **Multiple cards**: Create different SD cards for different content types

## Troubleshooting

### Videos won't play

**Check file format:**
- Neumi Atom supports: MP4, MKV, AVI, MOV, M4V, TS, VOB, M2TS
- If file won't play, convert with HandBrake to MP4

**Check file paths in M3U:**
- Open .m3u file in text editor
- Paths should be relative: `../Movies/filename.mp4`
- If paths are wrong, regenerate playlists

### CSV looks wrong

**Column names:**
- Should have: `filename`, `file_type`, `category`, `relative_path`
- Should have playlist columns: `Playlist1`, `Playlist2`, etc.
- If missing, delete CSV and re-run scan

**Character encoding:**
- If you see weird characters, file may have encoding issue
- Open in Notepad (Windows) or TextEdit (Mac)
- Save as UTF-8 encoding

### Mac system files still showing

**Verify filtering is working:**
- Check if files starting with `._` are in CSV
- If they are, the script may not be filtering correctly
- Make sure you're using the latest version of `scan_videos.py`

**Manual cleanup:**
- Open CSV in Excel
- Sort by filename column
- Delete all rows where filename starts with `._`
- Save CSV

### Playlists don't show all videos

**Check order numbers:**
- Each video needs a number in the playlist column
- Blank = excluded
- Numbers don't need to be sequential (1, 5, 10 works fine)

**Check paths:**
- Relative paths must be correct
- Should match actual SD card structure

### Python not found

**Windows:**
- Install from: https://www.python.org/
- During install, check "Add Python to PATH"
- Restart command prompt after install

**Mac:**
- Install from: https://www.python.org/
- Or use Homebrew: `brew install python3`

**Linux:**
- Ubuntu/Debian: `sudo apt-get install python3`
- Fedora: `sudo dnf install python3`

## Example Scenarios

### Scenario 1: Simple Movie Library

**SD card structure:**
```
Movies/
â”œâ”€â”€ Movie1.mp4
â”œâ”€â”€ Movie2.mp4
â””â”€â”€ Movie3.mp4
```

**CSV after scan:**
```csv
filename,file_type,category,relative_path,Playlist1
Movie1.mp4,mp4,Movies,Movies/Movie1.mp4,1
Movie2.mp4,mp4,Movies,Movies/Movie2.mp4,2
Movie3.mp4,mp4,Movies,Movies/Movie3.mp4,3
```

**Result:** One playlist (Playlist1.m3u) with all 3 movies in order

### Scenario 2: Multiple Categories and Playlists

**SD card structure:**
```
Movies/
â”œâ”€â”€ Action1.mp4
â””â”€â”€ Comedy1.mp4
Documentaries/
â””â”€â”€ Doc1.mp4
```

**Desired playlists:**
- Playlist1: All videos
- Playlist2: Just Action1 and Doc1
- Playlist3: Comedy1 and Doc1

**CSV to create:**
```csv
filename,file_type,category,relative_path,Playlist1,Playlist2,Playlist3
Action1.mp4,mp4,Movies,Movies/Action1.mp4,1,1,
Comedy1.mp4,mp4,Movies,Movies/Comedy1.mp4,2,,1
Doc1.mp4,mp4,Documentaries,Documentaries/Doc1.mp4,3,2,2
```

**Result:** Three playlists with different content and ordering

### Scenario 3: TV Series Episodes

**SD card structure:**
```
Series/
â”œâ”€â”€ Breaking Bad/
â”‚   â”œâ”€â”€ S01E01.mp4
â”‚   â”œâ”€â”€ S01E02.mp4
â”‚   â””â”€â”€ S01E03.mp4
```

**CSV:**
```csv
filename,file_type,category,relative_path,Series1
S01E01.mp4,mp4,Series,Series/Breaking Bad/S01E01.mp4,1
S01E02.mp4,mp4,Series,Series/Breaking Bad/S01E02.mp4,2
S01E03.mp4,mp4,Series,Series/Breaking Bad/S01E03.mp4,3
```

**Result:** One playlist with all episodes in order

## Best Practices

### File Organization

1. **Use clear folder names**: Movies, ClassicMovies, Documentaries, Series
2. **Include year in movie names**: "Casablanca (1942).mp4"
3. **Use season/episode format for TV**: "S01E01 - Pilot.mp4"
4. **Keep files in one level**: Avoid deep nesting (except for series)

### CSV Management

1. **Save backups** before regenerating CSV
2. **Use Excel's sort/filter** to organize playlists
3. **Keep order numbers spaced** (10, 20, 30) for easy insertion
4. **Document playlist purposes** in a separate notes file

### Playlist Design

1. **Thematic playlists**: Group by genre, mood, or length
2. **Time-based playlists**: Morning shorts, evening features
3. **Multiple orderings**: Same content, different sequences
4. **Test playlists** before giving device to elderly user

## Support and Contributions

This is a simple tool designed for ease of use. If you encounter issues:

1. Check this README carefully
2. Verify Python is installed correctly
3. Check file paths and folder names
4. Test with a small sample first

## License

Free to use and modify for personal use.

## Version History

- **v2.0** - Updated release
  - Removed numeric prefixes from script names
  - Added Mac system file filtering (._*)
  - Updated default categories and playlists
  - Removed "playlist_" prefix from column names
  - Improved documentation

- **v1.0** - Initial release
  - Basic scanning and playlist generation
  - Windows and Mac/Linux support
  - CSV-based management

---

**Happy playlist management!** ğŸ¬ğŸµ
