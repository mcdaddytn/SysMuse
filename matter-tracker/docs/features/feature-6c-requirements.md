Feature 6c

We are getting close to having IT Activities associated with tasks and timesheets.

We should rework the associations in the database.  Currently we have a one-to-many from ITActivity to Timesheet Entries but that is reversed.  We should have the ability to associate multiple ITActivities to a single TimesheetEntry.  But note that we will not be selecting the timesheet entry directly, but rather by selecting Matter and Task through association dialog.  We are either associating the an existing Timesheet Entry (by virtue of team member, dates, matter, and task matching) or creating a new one.  If an ITActivity is already associated with a task, it should not be able to be re-associated.  We would need to deassociate the activity first to make it available to be reassociated (i.e., allow the associate dialog to open again).  I am not sure that we also need direct relationships from ITActivity to matter and task - if that does not make implementation easier we probably do not need it.

The task merely is a descriptor of the general activity area within a timesheet (also associated for date range, team member, and matter), where multiple IT activities might be associated.  For example, for a task called "Trust Document Preparation", we might associate a calendar meeting where the issue was discussed, and then a document update, where a document was actually prepared and updated on disk.  Then the user would add both activities' durations within a task to help estimate the actual time that was spent on that task.  Conversely, if we deassociate an IT Activity from a task, we can subtract from the duration (within the TimesheetEntry), and make the IT Activity available to be reassociated again.

On the Associate Activity dialog, let's rearrange the controls a bit to better manage screen real estate.  The duration control is about the correct size, but we can limit the text description to just be "Duration" - including the units in the description makes it too long and the units are not visible.  But next to that control horizontally can be the urgency dropdown and also the timesheet date, they probably do not need to be on separate lines since they likely can fit side by side.

We should also add a read-only text control within the Associate dialog that displays the metadata information (place below the title and description).  There are two views of the metadata that will be useful, the first that can be displayed in a single horizontal line (even if truncated when the json is long).  That can be a comma delimited sequence of name value pairs, separated by a colon with a space (i.e., ": ").  The second would be a display of the entire metadata field with the json pretty-printed (removing all json syntax like brackets and braces) and just formatted in a nice format that preserves the hierarchy, shows lists where appropriate, but using simple display format with "label: data" - where the json key field is the label and the data is presented after a colon.  In the mouse-over popup, we can use newlines to show the data in a nice multi-line format that can resize to accomodate the data being displayed.  So on the Associatiate dialog, place the horizontal (using comma delimited) within the read-only text control on the page, and when moused over, we can display the multi-line pretty printed version.

The same type of popup can be formatted and used when mousing over the Title/Description field in the grid view on the IT Activity Tracker page, the mouseover event should show a pretty printed multi-line version of the metadata json.

We should also have a two-way passing of context to pre-select the last team member and date range between the timesheet and the it activity tracker page.  So when we go to IT Activity (through the button on the timesheet), and select the team member and date range, when we return to the timesheet, we should pass back that information to correctly initialize the timesheet.  This way after a user has associated IT Activities with tasks, we will return to the timesheet and immediately see the associated activity reflected in the actual time.

Also when mousing over the task on a timesheet, we should see a popup with any associated IT Activites that are reflected in the actual time.  Note that the user is free to edit the actual time independently for each task, but when we associate or deassociate an IT Activity we can add or subtract the duration of the activity to better estimate actual time.

Generate the code and schema changes for this enhancement and walk through the setup of the database with the new changes.

